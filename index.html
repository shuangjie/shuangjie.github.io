<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="DoubleJack&#39;s blog">
<meta property="og:url" content="https://shuangjie.github.io/index.html">
<meta property="og:site_name" content="DoubleJack&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Zeng">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://shuangjie.github.io/"/>





  <title>DoubleJack's blog</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DoubleJack's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">a noob developer</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://shuangjie.github.io/2020/04/21/Simple-development-of-wechat-bot-using-wechaty/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zeng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/13066471?s=460&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DoubleJack's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/04/21/Simple-development-of-wechat-bot-using-wechaty/" itemprop="url">Simple development of wechat bot using wechaty</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-21T21:05:16+08:00">
                2020-04-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>tips: if you try to use wechaty web version, you will be know it can’t work, so this post show you how to use ipad version to make bot work, if you never use wechaty any version, this post also pass the web version, because it’s pointless.</p>
<h2 id="what-is-it"><a href="#what-is-it" class="headerlink" title="what is it"></a>what is it</h2><p>cps-bot is a wechat bot that using wechaty to solve a lot of transfer and push work in the cps.</p>
<h2 id="Clear-demand"><a href="#Clear-demand" class="headerlink" title="Clear demand"></a>Clear demand</h2><p>Before development, we need to clarify the requirements, that is, what do I need a robot to do<br>cps-bot just need to automatically pass friend verification, send and receive messages<br>so let’s take a look at <a href="https://github.com/wechaty/wechaty" target="_blank" rel="noopener">wechaty</a> document</p>
<p><em>1.Automatically pass friend verification</em></p>
<ul>
<li>When someone adds a robot, pass or directly pass after judging the keyword of the verification message<br>After verification, automatically reply and introduce the robot function</li>
</ul>
<p><em>2.Reply to product link (JD)</em></p>
<ul>
<li>For example, reply <a href="https://item.m.jd.com/product/100008348572.html?wxa_abtest=o&amp;utm_source=iosapp&amp;utm_medium=appshare&amp;utm_campaign=t_335139774&amp;utm_term=CopyURL&amp;ad_od=share&amp;utm_user=plusmember" target="_blank" rel="noopener">https://item.m.jd.com/product/100008348572.html?wxa_abtest=o&amp;utm_source=iosapp&amp;utm_medium=appshare&amp;utm_campaign=t_335139774&amp;utm_term=CopyURL&amp;ad_od=share&amp;utm_user=plusmember</a></li>
</ul>
<h2 id="before-start"><a href="#before-start" class="headerlink" title="before start"></a>before start</h2><p>First of all, the wechaty-puppet-padplus version used here will be very slow to install for the first time, because the installation package contains puppeter, I have also tried it successfully two or three times, and the QR code will appear after success<br>If the scan code returns null (bug), close and run again</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-project"><a href="#Create-a-new-project" class="headerlink" title="Create a new project"></a>Create a new project</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir bot &amp; <span class="built_in">cd</span> ./bot</span><br><span class="line">$ npm init -y</span><br></pre></td></tr></table></figure>

<p>Then we install the dependency packages needed by the project</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save wechaty</span><br><span class="line">$ npm install --save wechaty-puppet-padplus</span><br><span class="line">$ npm install --save qrcode-terminal</span><br></pre></td></tr></table></figure>

<p>The preparatory work is done</p>
<h3 id="Start-to-code"><a href="#Start-to-code" class="headerlink" title="Start to code"></a>Start to code</h3><p>Write code according to needs，My file structure directory is like this: </p>
<ul>
<li>src<ul>
<li>config.js</li>
<li>index.js</li>
<li>onFriendship.js // Friends add monitoring callback</li>
<li>onMessage.js // Message listening callback</li>
<li>onScan.js // monitor the callback when scanning the QR code</li>
</ul>
</li>
</ul>
<h4 id="config-js"><a href="#config-js" class="headerlink" title="config.js"></a>config.js</h4><p>put our configuration params</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line">  &#x2F;&#x2F; puppet_padplus Token</span><br><span class="line">  token: &quot;puppet_padplus_f387a9c321f178ce&quot;,</span><br><span class="line">  &#x2F;&#x2F; bot name</span><br><span class="line">  name: &quot;Zeng&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * wechaty-puppet-padplus index</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">const &#123; Wechaty &#125; &#x3D; require(&quot;wechaty&quot;)</span><br><span class="line">const &#123; PuppetPadplus &#125; &#x3D; require(&quot;wechaty-puppet-padplus&quot;)</span><br><span class="line">const config &#x3D; require(&quot;.&#x2F;config&quot;)</span><br><span class="line"></span><br><span class="line">const onScan &#x3D; require(&quot;.&#x2F;onScan&quot;) &#x2F;&#x2F; monitor the callback when scanning the QR code</span><br><span class="line">const onMessage &#x3D; require(&quot;.&#x2F;onMessage&quot;) &#x2F;&#x2F; Message listening callback</span><br><span class="line">const onFriendShip &#x3D; require(&quot;.&#x2F;onFriendShip&quot;) &#x2F;&#x2F; Friends add monitoring callback</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; init</span><br><span class="line">const bot &#x3D; new Wechaty(&#123;</span><br><span class="line">  puppet: new PuppetPadplus(&#123;</span><br><span class="line">    token: config.token</span><br><span class="line">  &#125;),</span><br><span class="line">  name: config.name</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">bot</span><br><span class="line">  .on(&quot;scan&quot;, onScan)</span><br><span class="line">  .on(&quot;message&quot;, onMessage(bot))</span><br><span class="line">  .on(&quot;friendship&quot;, onFriendShip)</span><br><span class="line">  .start()</span><br></pre></td></tr></table></figure>

<h4 id="onFriendship-js"><a href="#onFriendship-js" class="headerlink" title="onFriendship.js"></a>onFriendship.js</h4><p>Friends add monitoring callback</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * Friends add monitoring callback</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">const &#123; Friendship &#125; &#x3D; require(&quot;wechaty&quot;)</span><br><span class="line">const config &#x3D; require(&quot;.&#x2F;config&quot;)</span><br><span class="line">&#x2F;&#x2F; Friends add verification message to automatically agree to keywords</span><br><span class="line">const addFriendKeyword &#x3D; &quot;cps&quot; &#x2F;&#x2F;if need more , use array</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Friends add monitoring callback</span><br><span class="line">module.exports &#x3D; async function onFriendShip(friendship) &#123;</span><br><span class="line">  let logMsg</span><br><span class="line">  try &#123;</span><br><span class="line">    logMsg &#x3D; &quot;add friend&quot; + friendship.contact().name()</span><br><span class="line">    console.log(logMsg)</span><br><span class="line">    switch (friendship.type()) &#123;</span><br><span class="line">      &#x2F;**</span><br><span class="line">       * step 1 New friend request</span><br><span class="line">       * to use &#39;request.hello()&#39;&#39; to get verification message </span><br><span class="line">       * Accept this request via &#39;request.accept ()&#39;</span><br><span class="line">       *&#x2F;</span><br><span class="line">      case Friendship.Type.Receive:</span><br><span class="line">        if (addFriendKeyword &#x3D;&#x3D; friendship.hello()) &#123;</span><br><span class="line">          logMsg &#x3D; &#96;Pass verification automatically&#96;</span><br><span class="line">          await friendship.accept()</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          logMsg &#x3D; &quot;Not automatically passed because the verification message is: &quot; + friendship.hello()</span><br><span class="line">        &#125;</span><br><span class="line">        break</span><br><span class="line"></span><br><span class="line">      &#x2F;**</span><br><span class="line">       * step 2 confirm</span><br><span class="line">       *&#x2F;</span><br><span class="line">      case Friendship.Type.Confirm:</span><br><span class="line">        logMsg &#x3D; &quot;friend ship confirmed with &quot; + friendship.contact().name()</span><br><span class="line">        break</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(logMsg)</span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">    logMsg &#x3D; e.message</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="onMessage-js"><a href="#onMessage-js" class="headerlink" title="onMessage.js"></a>onMessage.js</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * Message listening callback</span><br><span class="line"> *&#x2F;</span><br><span class="line">const &#123; Message &#125; &#x3D; require(&quot;wechaty&quot;)</span><br><span class="line">&#x2F;&#x2F; node-request</span><br><span class="line">const request &#x3D; require(&quot;request&quot;)</span><br><span class="line">const urlencode &#x3D; require(&quot;urlencode&quot;)</span><br><span class="line">const config &#x3D; require(&quot;.&#x2F;config&quot;)</span><br><span class="line">&#x2F;&#x2F; bot name</span><br><span class="line">const name &#x3D; config.name</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Message listening callback</span><br><span class="line">module.exports &#x3D; bot &#x3D;&gt; &#123;</span><br><span class="line">  return async function onMessage(msg) &#123;</span><br><span class="line">    &#x2F;&#x2F; Judging that the message came from yourself, do not care, return</span><br><span class="line">    if (msg.self()) return</span><br><span class="line"></span><br><span class="line">    console.log(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line">    console.log(&#96;msg : $&#123;msg&#125;&#96;)</span><br><span class="line">    console.log(</span><br><span class="line">      &#96;from: $&#123;msg.from() ? msg.from().name() : null&#125;: $&#123;</span><br><span class="line">        msg.from() ? msg.from().id : null</span><br><span class="line">      &#125;&#96;</span><br><span class="line">    )</span><br><span class="line">    console.log(&#96;to: $&#123;msg.to()&#125;&#96;)</span><br><span class="line">    console.log(&#96;text: $&#123;msg.text()&#125;&#96;)</span><br><span class="line">    console.log(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;)</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; Determine if this message type is text</span><br><span class="line">    if (msg.type() &#x3D;&#x3D; Message.Type.Text) &#123;</span><br><span class="line"></span><br><span class="line">      &#x2F;&#x2F; request your api</span><br><span class="line">      let res &#x3D; await requestApi(msg.text())</span><br><span class="line">      &#x2F;&#x2F; return content</span><br><span class="line">      await msg.say(res)</span><br><span class="line">      </span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      console.log(&quot;The message is not text!&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * Request an interface and return the message to the user</span><br><span class="line"> * @param &#123;String&#125; info sent content</span><br><span class="line"> * @return &#123;Promise&#125; Corresponding content</span><br><span class="line"> *&#x2F;</span><br><span class="line">function requestApi(info) &#123;</span><br><span class="line">  return new Promise((resolve, reject) &#x3D;&gt; &#123;</span><br><span class="line">    let url &#x3D; &#96;https:&#x2F;&#x2F;cps.linkces.com&#x2F;jd&#x2F;universal&#96;</span><br><span class="line"></span><br><span class="line">    request.post(url, &#123;form:&#123;content:info&#125;&#125;,(error, response, body) &#x3D;&gt; &#123;</span><br><span class="line"></span><br><span class="line">      let res &#x3D; JSON.parse(body)</span><br><span class="line">      if (!error &amp;&amp; res.code &#x3D;&#x3D; 0) &#123;</span><br><span class="line">        let send &#x3D; res.data.result</span><br><span class="line">        console.log(&#39;res&#39;, res)</span><br><span class="line">        resolve(send)</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        resolve(&quot;Server is busy&quot;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;).then().catch( function(e)&#123;</span><br><span class="line">    &#x2F;&#x2F;do some thing</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="onScan-js"><a href="#onScan-js" class="headerlink" title="onScan.js"></a>onScan.js</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * monitor the callback when scanning the QR code</span><br><span class="line"> *&#x2F;</span><br><span class="line">const Qrterminal &#x3D; require(&quot;qrcode-terminal&quot;)</span><br><span class="line"></span><br><span class="line">module.exports &#x3D; function onScan(qrcode, status) &#123;</span><br><span class="line">  Qrterminal.generate(qrcode, &#123; small: true &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="try-run"><a href="#try-run" class="headerlink" title="try run"></a>try run</h3><p>set up your startup script in ‘package.json’</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;node .&#x2F;src&#x2F;index.js&quot;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>then run </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run start</span><br></pre></td></tr></table></figure>

<p>done</p>
<h3 id="if-you-want-my-code"><a href="#if-you-want-my-code" class="headerlink" title="if you want my code"></a>if you want my code</h3><p>github : <a href="https://github.com/shuangjie/cps-bot" target="_blank" rel="noopener">cps-bot</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://avatars0.githubusercontent.com/u/13066471?s=460&v=4"
                alt="Zeng" />
            
              <p class="site-author-name" itemprop="name">Zeng</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7Carchive">
              
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zeng</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
